!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/effects",["exports","@ngrx/store","rxjs","rxjs/operators","@angular/core"],e):e((t.ngrx=t.ngrx||{},t.ngrx.effects={}),t.ngrx.store,t.Rx,t.operators,t.ng.core)}(this,function(t,e,r,i,o){"use strict";var n,c=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f="__@ngrx/effects__";function a(t){return Object.getPrototypeOf(t)}var u=e.compose(function(t){return t.constructor[f]||[]},a);var s="ngrxOnRunEffects";function p(n){var c=a(n).constructor.name,t=u(n).map(function(t){var e=t.propertyName,r=t.dispatch,o="function"==typeof n[e]?n[e]():n[e];return!1===r?o.pipe(i.ignoreElements()):o.pipe(i.materialize()).pipe(i.map(function(t){return{effect:n[e],notification:t,propertyName:e,sourceName:c,sourceInstance:n}}))});return r.merge.apply(void 0,t)}function d(t){var e,r=p(t);return e=a(t),s in e&&"function"==typeof e[s]?t.ngrxOnRunEffects(r):r}var y=function(r){function o(t){var e=r.call(this)||this;return t&&(e.source=t),e}return c(o,r),o.prototype.lift=function(t){var e=new o;return e.source=this,e.operator=t,e},o.prototype.ofType=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return l.apply(void 0,t)(this)},o}(r.Observable);function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.filter(function(e){return t.some(function(t){return t===e.type})})}function h(t,e){var r,o;o=e,"E"===(r=t).notification.kind&&o.handleError(r.notification.error),function(t,e){if("N"===t.notification.kind){var r=t.notification.value,o=!((u=r)&&u.type&&"string"==typeof u.type);o&&e.handleError(new Error("Effect "+(c=(n=t).propertyName,i=n.sourceInstance,f=n.sourceName,a="function"==typeof i[c],'"'+f+"."+c+(a?"()":"")+'"')+" dispatched an invalid action: "+r))}var n,c,i,f,a;var u}(t,e)}y.decorators=[{type:o.Injectable}],y.ctorParameters=function(){return[{type:r.Observable,decorators:[{type:o.Inject,args:[e.ScannedActionsSubject]}]}]};var v=function(r){function t(t){var e=r.call(this)||this;return e.errorHandler=t,e}return c(t,r),t.prototype.addEffects=function(t){this.next(t)},t.prototype.toActions=function(){var e=this;return this.pipe(i.groupBy(a),i.mergeMap(function(t){return t.pipe(i.exhaustMap(d),i.map(function(t){return h(t,e.errorHandler),t.notification}),i.filter(function(t){return"N"===t.kind}),i.dematerialize())}))},t}(r.Subject);v.decorators=[{type:o.Injectable}],v.ctorParameters=function(){return[{type:o.ErrorHandler}]};new o.InjectionToken("ngrx/effects: Immediate Effects");var g=new o.InjectionToken("ngrx/effects: Root Effects"),m=new o.InjectionToken("ngrx/effects: Feature Effects"),E=function(){function t(t,e){this.effectSources=t,this.store=e,this.effectsSubscription=null}return t.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},t.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},t}();E.decorators=[{type:o.Injectable}],E.ctorParameters=function(){return[{type:v},{type:e.Store}]};var b="@ngrx/effects/init",x=function(){function t(e,t,r,o,n,c){this.sources=e,t.start(),o.forEach(function(t){return e.addEffects(t)}),r.dispatch({type:b})}return t.prototype.addEffects=function(t){this.sources.addEffects(t)},t}();x.decorators=[{type:o.NgModule,args:[{}]}],x.ctorParameters=function(){return[{type:v},{type:E},{type:e.Store},{type:Array,decorators:[{type:o.Inject,args:[g]}]},{type:e.StoreRootModule,decorators:[{type:o.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:o.Optional}]}]};var j=function(e,t,r,o){this.root=e,t.forEach(function(t){return t.forEach(function(t){return e.addEffects(t)})})};j.decorators=[{type:o.NgModule,args:[{}]}],j.ctorParameters=function(){return[{type:x},{type:Array,decorators:[{type:o.Inject,args:[m]}]},{type:e.StoreRootModule,decorators:[{type:o.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:o.Optional}]}]};var O=function(){function t(){}return t.forFeature=function(t){return{ngModule:j,providers:[t,{provide:m,multi:!0,deps:t,useFactory:S}]}},t.forRoot=function(t){return{ngModule:x,providers:[E,v,y,t,{provide:g,deps:t,useFactory:S}]}},t}();function S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}O.decorators=[{type:o.NgModule,args:[{}]}],t.Effect=function(t){var c=(void 0===t?{dispatch:!0}:t).dispatch;return function(t,e){var r,o,n;r=[{propertyName:e,dispatch:c}],o=t.constructor,n=o.hasOwnProperty(f)?o[f]:Object.defineProperty(o,f,{value:[]})[f],Array.prototype.push.apply(n,r)}},t.getEffectsMetadata=function(t){var o={};return u(t).forEach(function(t){var e=t.propertyName,r=t.dispatch;o[e]={dispatch:r}}),o},t.mergeEffects=p,t.Actions=y,t.ofType=l,t.EffectsModule=O,t.EffectSources=v,t.ROOT_EFFECTS_INIT=b,t.ɵc=j,t.ɵa=S,t.ɵb=x,t.ɵf=E,t.ɵe=m,t.ɵd=g,Object.defineProperty(t,"__esModule",{value:!0})});