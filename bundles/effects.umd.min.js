!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@ngrx/store"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("@ngrx/effects",["exports","@ngrx/store","rxjs","rxjs/operators","@angular/core"],e):e((t.ngrx=t.ngrx||{},t.ngrx.effects={}),t.ngrx.store,t.Rx,t.operators,t.ng.core)}(this,function(t,e,r,n,o){"use strict";function c(t){var e=(void 0===t?{dispatch:!0}:t).dispatch;return function(t,r){!function(t,e){var r=t.constructor,n=r.hasOwnProperty(y)?r[y]:Object.defineProperty(r,y,{value:[]})[y];Array.prototype.push.apply(n,e)}(t,[{propertyName:r,dispatch:e}])}}function i(t){return Object.getPrototypeOf(t)}function u(t){var e=i(t).constructor.name,o=l(t).map(function(r){var o=r.propertyName,c=r.dispatch,i="function"==typeof t[o]?t[o]():t[o];if(!1===c)return i.pipe(n.ignoreElements());return i.pipe(n.materialize()).pipe(n.map(function(r){return{effect:t[o],notification:r,propertyName:o,sourceName:e,sourceInstance:t}}))});return r.merge.apply(void 0,o)}function f(t){var e=u(t);return function(t){var e=i(t);return h in e&&"function"==typeof e[h]}(t)?t.ngrxOnRunEffects(e):e}function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.filter(function(e){return t.some(function(t){return t===e.type})})}function s(t,e){!function(t,e){"E"===t.notification.kind&&e.handleError(t.notification.error)}(t,e),function(t,e){if("N"===t.notification.kind){var r=t.notification.value;!function(t){return t&&t.type&&"string"==typeof t.type}(r)&&e.handleError(new Error("Effect "+function(t){var e=t.propertyName,r=t.sourceInstance,n=t.sourceName,o="function"==typeof r[e];return'"'+n+"."+e+(o?"()":"")+'"'}(t)+" dispatched an invalid action: "+r))}}(t,e)}function p(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t}var d=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),y="__@ngrx/effects__",l=e.compose(function(t){return t.constructor[y]||[]},i),h="ngrxOnRunEffects",g=function(t){function e(e){var r=t.call(this)||this;return e&&(r.source=e),r}return d(e,t),e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.ofType=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.apply(void 0,t)(this)},e}(r.Observable);g.decorators=[{type:o.Injectable}],g.ctorParameters=function(){return[{type:r.Observable,decorators:[{type:o.Inject,args:[e.ScannedActionsSubject]}]}]};var v=function(t){function e(e){var r=t.call(this)||this;return r.errorHandler=e,r}return d(e,t),e.prototype.addEffects=function(t){this.next(t)},e.prototype.toActions=function(){var t=this;return this.pipe(n.groupBy(i),n.mergeMap(function(e){return e.pipe(n.exhaustMap(f),n.map(function(e){return s(e,t.errorHandler),e.notification}),n.filter(function(t){return"N"===t.kind}),n.dematerialize())}))},e}(r.Subject);v.decorators=[{type:o.Injectable}],v.ctorParameters=function(){return[{type:o.ErrorHandler}]};new o.InjectionToken("ngrx/effects: Immediate Effects");var m=new o.InjectionToken("ngrx/effects: Root Effects"),E=new o.InjectionToken("ngrx/effects: Feature Effects"),b=function(){function t(t,e){this.effectSources=t,this.store=e,this.effectsSubscription=null}return t.prototype.start=function(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))},t.prototype.ngOnDestroy=function(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)},t}();b.decorators=[{type:o.Injectable}],b.ctorParameters=function(){return[{type:v},{type:e.Store}]};var x="@ngrx/effects/init",j=function(){function t(t,e,r,n,o,c){this.sources=t,e.start(),n.forEach(function(e){return t.addEffects(e)}),r.dispatch({type:x})}return t.prototype.addEffects=function(t){this.sources.addEffects(t)},t}();j.decorators=[{type:o.NgModule,args:[{}]}],j.ctorParameters=function(){return[{type:v},{type:b},{type:e.Store},{type:Array,decorators:[{type:o.Inject,args:[m]}]},{type:e.StoreRootModule,decorators:[{type:o.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:o.Optional}]}]};var O=function(){return function(t,e,r,n){this.root=t,e.forEach(function(e){return e.forEach(function(e){return t.addEffects(e)})})}}();O.decorators=[{type:o.NgModule,args:[{}]}],O.ctorParameters=function(){return[{type:j},{type:Array,decorators:[{type:o.Inject,args:[E]}]},{type:e.StoreRootModule,decorators:[{type:o.Optional}]},{type:e.StoreFeatureModule,decorators:[{type:o.Optional}]}]};var S=function(){function t(){}return t.forFeature=function(t){return{ngModule:O,providers:[t,{provide:E,multi:!0,deps:t,useFactory:p}]}},t.forRoot=function(t){return{ngModule:j,providers:[b,v,g,t,{provide:m,deps:t,useFactory:p}]}},t}();S.decorators=[{type:o.NgModule,args:[{}]}],S.ctorParameters=function(){return[]},t.Effect=c,t.getEffectsMetadata=function(t){var e={};return l(t).forEach(function(t){var r=t.propertyName,n=t.dispatch;e[r]={dispatch:n}}),e},t.mergeEffects=u,t.Actions=g,t.ofType=a,t.EffectsModule=S,t.EffectSources=v,t.ROOT_EFFECTS_INIT=x,t.ɵc=O,t.ɵa=p,t.ɵb=j,t.ɵf=b,t.ɵe=E,t.ɵd=m,Object.defineProperty(t,"__esModule",{value:!0})});